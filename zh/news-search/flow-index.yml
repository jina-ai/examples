!Flow
pods:
  extractor:
    uses: pods/extractor/extractor.yml
    parallel: 2

  encoder:
#    uses: jinaai/hub.executors.encoders.nlp.transformers-hitscir
    uses: pods/encoder/encoder.yml
    timeout_ready: 6000000

  chunk_indexer:
    uses: pods/chunk_indexer/chunk_indexer.yml
#    shards: 2

  doc_indexer:
    uses: pods/doc_indexer/doc_indexer.yml
    needs: gateway

  join:
    uses: _merge
    needs: [chunk_indexer, doc_indexer]
    read_only: True